<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#21808d">
    <title>Langue Learning - Apprendre les Langues</title>
    <style>
        :root {
            --color-white: rgba(255, 255, 255, 1);
            --color-cream-50: rgba(252, 252, 249, 1);
            --color-gray-200: rgba(245, 245, 245, 1);
            --color-gray-300: rgba(167, 169, 169, 1);
            --color-slate-500: rgba(98, 108, 113, 1);
            --color-slate-900: rgba(19, 52, 59, 1);
            --color-teal-300: rgba(50, 184, 198, 1);
            --color-teal-400: rgba(45, 166, 178, 1);
            --color-teal-500: rgba(33, 128, 141, 1);
            --color-red-400: rgba(255, 84, 89, 1);
            --color-green-500: rgba(34, 197, 94, 1);

            --font-family-base: "Segoe UI", Roboto, sans-serif;
            --font-size-base: 14px;
            --font-size-lg: 16px;
            --font-size-xl: 18px;
            --space-8: 8px;
            --space-16: 16px;
            --space-20: 20px;
            --radius-base: 8px;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: var(--font-family-base);
            background: linear-gradient(135deg, #f5f9f9 0%, #e8f4f5 100%);
            min-height: 100vh;
            color: var(--color-slate-900);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: var(--space-20);
        }

        .header {
            text-align: center;
            margin-bottom: var(--space-20);
            display: flex;
            flex-direction: column;
            gap: var(--space-16);
        }

        .header h1 {
            margin: 0;
            font-size: 32px;
            color: var(--color-teal-500);
        }

        .controls {
            display: flex;
            gap: var(--space-16);
            flex-wrap: wrap;
            justify-content: center;
            align-items: end;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-8);
        }

        .control-group label {
            font-weight: 600;
            font-size: 12px;
            color: var(--color-slate-500);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        select,
        input {
            padding: var(--space-8) var(--space-16);
            border: 2px solid var(--color-gray-200);
            border-radius: var(--radius-base);
            font-size: var(--font-size-base);
            background: var(--color-white);
            cursor: pointer;
            transition: border-color 0.2s;
        }

        select:focus,
        input:focus {
            outline: none;
            border-color: var(--color-teal-500);
            box-shadow: 0 0 0 3px rgba(33, 128, 141, 0.1);
        }

        .btn {
            padding: var(--space-8) var(--space-20);
            border: none;
            border-radius: var(--radius-base);
            font-size: var(--font-size-base);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: var(--space-8);
        }

        .btn-primary {
            background: var(--color-teal-500);
            color: white;
        }

        .btn-primary:hover {
            background: var(--color-teal-400);
        }

        .btn-secondary {
            background: var(--color-gray-200);
            color: var(--color-slate-900);
        }

        .btn-secondary:hover {
            background: var(--color-gray-300);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-20);
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 24px;
            }

            .btn {
                padding: var(--space-16) var(--space-20);
                /* Larger touch targets */
                width: 100%;
                justify-content: center;
            }
        }

        .card {
            background: var(--color-white);
            border-radius: 12px;
            padding: var(--space-20);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
            gap: var(--space-16);
        }

        .card h2 {
            margin: 0;
            font-size: var(--font-size-xl);
            color: var(--color-slate-900);
        }

        .dialogue-box {
            background: #f0f7f8;
            padding: var(--space-16);
            border-radius: var(--radius-base);
            border-left: 4px solid var(--color-teal-500);
            min-height: 80px;
            display: flex;
            align-items: center;
            font-style: italic;
            color: var(--color-slate-900);
            word-wrap: break-word;
        }

        .dialogue-lang {
            font-size: 12px;
            color: var(--color-slate-500);
            margin-bottom: var(--space-8);
            text-transform: uppercase;
            font-weight: 600;
        }

        .audio-controls {
            display: flex;
            gap: var(--space-8);
            flex-wrap: wrap;
        }

        .btn-icon {
            padding: var(--space-8) var(--space-16);
            font-size: 20px;
        }

        .recorder {
            display: flex;
            flex-direction: column;
            gap: var(--space-16);
        }

        .recorder-status {
            text-align: center;
            padding: var(--space-16);
            border-radius: var(--radius-base);
            font-weight: 600;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .status-ready {
            background: #e8f5e9;
            color: var(--color-green-500);
        }

        .status-recording {
            background: #ffe8e8;
            color: var(--color-red-400);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.6;
            }
        }

        .status-error {
            background: #ffe8e8;
            color: var(--color-red-400);
        }

        .transcript {
            background: #f9f9f9;
            padding: var(--space-16);
            border-radius: var(--radius-base);
            min-height: 60px;
            border: 2px dashed var(--color-gray-200);
            word-wrap: break-word;
        }

        .transcript-empty {
            color: var(--color-gray-300);
            font-style: italic;
        }

        .correction-box {
            background: #f0f7f8;
            padding: var(--space-16);
            border-radius: var(--radius-base);
            border-left: 4px solid var(--color-teal-500);
            min-height: 80px;
            display: flex;
            align-items: center;
        }

        .correction-box.error {
            border-left-color: var(--color-red-400);
            background: #ffe8e8;
        }

        .correction-box.success {
            border-left-color: var(--color-green-500);
            background: #e8f5e9;
        }

        .correction-content {
            font-size: 13px;
            line-height: 1.6;
            color: var(--color-slate-900);
        }

        .correction-content strong {
            color: var(--color-teal-500);
        }

        .correction-box.error strong {
            color: var(--color-red-400);
        }

        .correction-box.success strong {
            color: var(--color-green-500);
        }

        .divider {
            height: 2px;
            background: var(--color-gray-200);
            margin: var(--space-8) 0;
        }

        .loading {
            text-align: center;
            color: var(--color-slate-500);
            font-size: 12px;
        }

        .loading::after {
            content: "...";
            animation: dots 1.5s steps(3, end) infinite;
        }

        @keyframes dots {

            0%,
            20% {
                content: ".";
            }

            40% {
                content: "..";
            }

            60%,
            100% {
                content: "...";
            }
        }

        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-16);
            background: var(--color-gray-200);
            padding: var(--space-16);
            border-radius: var(--radius-base);
            margin-top: var(--space-16);
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--color-teal-500);
        }

        .stat-label {
            font-size: 12px;
            color: var(--color-slate-500);
            margin-top: var(--space-8);
            text-transform: uppercase;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üó£Ô∏è Langue Learning</h1>

            <div class="controls">
                <div class="control-group">
                    <label>Langue cible</label>
                    <select id="targetLang">
                        <option value="el-GR">Grec (ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨)</option>
                        <option value="es-ES">Espagnol (Espa√±ol)</option>
                        <option value="de-DE">Allemand (Deutsch)</option>
                        <option value="it-IT">Italien (Italiano)</option>
                        <option value="pt-PT">Portugais (Portugu√™s)</option>
                        <option value="ja-JP">Japonais (Êó•Êú¨Ë™û)</option>
                    </select>
                </div>

                <div class="control-group">
                    <label>Niveau</label>
                    <select id="level">
                        <option value="A1">D√©butant A1</option>
                        <option value="A2">√âl√©mentaire A2</option>
                        <option value="B1">Interm√©diaire B1</option>
                        <option value="B2">Bon B2</option>
                    </select>
                </div>

                <button class="btn btn-primary" id="generateBtn">
                    ‚ú® G√©n√©rer Dialogue
                </button>
            </div>
        </div>

        <div class="content">
            <!-- Panneau gauche: Dialogue -->
            <div class="card">
                <h2>üìö Dialogue</h2>

                <div>
                    <div class="dialogue-lang">Fran√ßais (Texte)</div>
                    <div class="dialogue-box" id="frenchDialogue">
                        Cliquez sur "G√©n√©rer Dialogue" pour commencer
                    </div>
                </div>

                <div class="divider"></div>

                <div>
                    <div class="dialogue-lang" id="targetLangLabel">Grec (√Ä r√©p√©ter)</div>
                    <div class="dialogue-box" id="targetDialogue">
                        En attente de g√©n√©ration...
                    </div>
                    <div class="audio-controls">
                        <button class="btn btn-secondary" id="speakTarget" style="flex: 1;">
                            üîä √âcouter le Grec
                        </button>
                        <button class="btn btn-secondary" id="toggleTranslation">
                            üëÅÔ∏è Masquer
                        </button>
                    </div>
                </div>

                <div class="stats">
                    <div class="stat">
                        <div class="stat-value" id="correctCount">0</div>
                        <div class="stat-label">Correctes</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="totalCount">0</div>
                        <div class="stat-label">Totales</div>
                    </div>
                </div>
            </div>

            <!-- Panneau droit: Enregistrement et Correction -->
            <div class="card">
                <h2>üé§ Enregistrement & Correction</h2>

                <div class="recorder">
                    <div class="recorder-status status-ready" id="recorderStatus">
                        Pr√™t √† enregistrer
                    </div>

                    <div style="display: flex; gap: var(--space-8); flex-wrap: wrap;">
                        <button class="btn btn-primary" id="recordBtn" style="flex: 1;">
                            ‚è∫Ô∏è Enregistrer
                        </button>
                        <button class="btn btn-secondary" id="stopBtn" disabled style="flex: 1;">
                            ‚èπÔ∏è Arr√™ter
                        </button>
                    </div>

                    <div class="divider"></div>

                    <div>
                        <div style="font-weight: 600; margin-bottom: var(--space-8);">Votre r√©ponse:</div>
                        <div class="transcript" id="transcript">
                            <span class="transcript-empty">Aucun enregistrement</span>
                        </div>
                    </div>

                    <button class="btn btn-primary" id="checkBtn" style="width: 100%;" disabled>
                        ‚úÖ V√©rifier la R√©ponse
                    </button>

                    <div class="divider" style="display: none;" id="correctionDivider"></div>

                    <div id="correctionContainer" style="display: none;">
                        <div style="font-weight: 600; margin-bottom: var(--space-8);">Correction:</div>
                        <div class="correction-box" id="correctionBox">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const DIALOGUES = {
            A1: {
                fr: [
                    "Bonjour, comment allez-vous?",
                    "Je m'appelle Marie. Et vous?",
                    "Quelle heure est-il?",
                    "O√π habitez-vous?",
                    "Aimez-vous le caf√©?",
                    "C'est votre premier jour?",
                    "Vous venez d'o√π?",
                    "Que faites-vous dans la vie?"
                ],
                'el-GR': [
                    "ŒöŒ±ŒªŒ∑ŒºŒ≠œÅŒ±, œÄœéœÇ ŒµŒØœÉœÑŒµ;",
                    "ŒúŒµ ŒªŒ≠ŒΩŒµ ŒúŒ±œÅŒØŒ±. ŒïœÉŒ¨œÇ;",
                    "Œ§Œπ œéœÅŒ± ŒµŒØŒΩŒ±Œπ;",
                    "Œ†Œøœç ŒºŒ≠ŒΩŒµœÑŒµ;",
                    "Œ£Œ±œÇ Œ±œÅŒ≠œÉŒµŒπ Œø Œ∫Œ±œÜŒ≠œÇ;",
                    "ŒïŒØŒΩŒ±Œπ Œ∑ œÄœÅœéœÑŒ∑ œÉŒ±œÇ ŒºŒ≠œÅŒ±;",
                    "ŒëœÄœå œÄŒøœç Œ≠œÅœáŒµœÉœÑŒµ;",
                    "Œ§Œπ Œ∫Œ¨ŒΩŒµœÑŒµ œÉœÑŒ∑ Œ∂œâŒÆ;"
                ],
                'es-ES': [
                    "Hola, ¬øc√≥mo est√°s?",
                    "Me llamo Mar√≠a. ¬øY t√∫?",
                    "¬øQu√© hora es?",
                    "¬øD√≥nde vives?",
                    "¬øTe gusta el caf√©?",
                    "¬øEs tu premier d√≠a?",
                    "¬øDe d√≥nde vienes?",
                    "¬øA qu√© te dedicas?"
                ],
                'de-DE': [
                    "Hallo, wie geht es Ihnen?",
                    "Ich hei√üe Maria. Und Sie?",
                    "Wie sp√§t ist es?",
                    "Wo wohnen Sie?",
                    "M√∂gen Sie Kaffee?",
                    "Ist das Ihr erster Tag?",
                    "Woher kommen Sie?",
                    "Was machen Sie beruflich?"
                ],
                'it-IT': [
                    "Buongiorno, come sta?",
                    "Mi chiamo Maria. E lei?",
                    "Che ore sono?",
                    "Dove abita?",
                    "Le piace il caff√®?",
                    "√à il suo primo giorno?",
                    "Da dove viene?",
                    "Che lavoro fa?"
                ],
                'pt-PT': [
                    "Ol√°, como est√°?",
                    "Chamo-me Maria. E voc√™?",
                    "Que horas s√£o?",
                    "Onde mora?",
                    "Gosta de caf√©?",
                    "√â o seu primeiro dia?",
                    "De onde vem?",
                    "O que faz na vida?"
                ],
                'ja-JP': [
                    "„Åì„Çì„Å´„Å°„ÅØ„ÄÅÂÖÉÊ∞ó„Åß„Åô„ÅãÔºü",
                    "ÁßÅ„ÅØ„Éû„É™„Ç¢„Åß„Åô„ÄÇ„ÅÇ„Å™„Åü„ÅØÔºü",
                    "‰ΩïÊôÇ„Åß„Åô„ÅãÔºü",
                    "„Å©„Åì„Å´‰Ωè„Çì„Åß„ÅÑ„Åæ„Åô„ÅãÔºü",
                    "„Ç≥„Éº„Éí„Éº„ÅØÂ•Ω„Åç„Åß„Åô„ÅãÔºü",
                    "‰ªäÊó•„ÅØÂàùÊó•„Åß„Åô„ÅãÔºü",
                    "„Å©„Åì„Åã„ÇâÊù•„Åæ„Åó„Åü„ÅãÔºü",
                    "„Åä‰ªï‰∫ã„ÅØ‰Ωï„Åß„Åô„ÅãÔºü"
                ]
            },
            A2: {
                fr: [
                    "Parlez-vous d'autres langues?",
                    "Je viens de Paris. C'est une belle ville.",
                    "Qu'avez-vous mang√© ce matin?",
                    "Comment s'est pass√©e votre journ√©e?",
                    "Vous travaillez depuis longtemps ici?",
                    "Qu'est-ce que vous aimeriez faire ce weekend?",
                    "Vous connaissez ce restaurant?",
                    "Pourquoi avez-vous d√©cid√© d'apprendre cette langue?"
                ],
                'el-GR': [
                    "ŒúŒπŒªŒ¨œÑŒµ Œ¨ŒªŒªŒµœÇ Œ≥ŒªœéœÉœÉŒµœÇ;",
                    "ŒàœÅœáŒøŒºŒ±Œπ Œ±œÄœå œÑŒø Œ†Œ±œÅŒØœÉŒπ. ŒïŒØŒΩŒ±Œπ ŒºŒπŒ± œåŒºŒøœÅœÜŒ∑ œÄœåŒªŒ∑.",
                    "Œ§Œπ œÜŒ¨Œ≥Œ±œÑŒµ œÑŒø œÄœÅœâŒØ;",
                    "Œ†œéœÇ ŒÆœÑŒ±ŒΩ Œ∑ ŒºŒ≠œÅŒ± œÉŒ±œÇ;",
                    "ŒîŒøœÖŒªŒµœçŒµœÑŒµ ŒµŒ¥œé ŒµŒ¥œé Œ∫Œ±Œπ œÄŒøŒªœç;",
                    "Œ§Œπ Œ∏Œ± Œ∏Œ≠ŒªŒ±œÑŒµ ŒΩŒ± Œ∫Œ¨ŒΩŒµœÑŒµ Œ±œÖœÑœå œÑŒø Œ£Œ±Œ≤Œ≤Œ±œÑŒøŒ∫œçœÅŒπŒ±Œ∫Œø;",
                    "ŒìŒΩœâœÅŒØŒ∂ŒµœÑŒµ Œ±œÖœÑœå œÑŒø ŒµœÉœÑŒπŒ±œÑœåœÅŒπŒø;",
                    "ŒìŒπŒ±œÑŒØ Œ±œÄŒøœÜŒ±œÉŒØœÉŒ±œÑŒµ ŒΩŒ± ŒºŒ¨Œ∏ŒµœÑŒµ Œ±œÖœÑŒÆ œÑŒ∑ Œ≥ŒªœéœÉœÉŒ±!"
                ],
                'es-ES': [
                    "¬øHablas otros idiomas?",
                    "Vengo de Par√≠s. Es una ciudad hermosa.",
                    "¬øQu√© comiste esta ma√±ana?",
                    "¬øC√≥mo estuvo tu d√≠a?",
                    "¬øLlevas mucho tiempo trabajando aqu√≠?",
                    "¬øQu√© te gustar√≠a hacer este fin de semana?",
                    "¬øConoces este restaurante?",
                    "¬øPor qu√© decidiste aprender este idioma?"
                ],
                'de-DE': [
                    "Sprechen Sie andere Sprachen?",
                    "Ich komme aus Paris. Es ist eine sch√∂ne Stadt.",
                    "Was haben Sie heute Morgen gegessen?",
                    "Wie war Ihr Tag?",
                    "Arbeiten Sie schon lange hier?",
                    "Was m√∂chten Sie dieses Wochenende machen?",
                    "Kennen Sie dieses Restaurant?",
                    "Warum haben Sie sich entschieden, diese Sprache zu lernen?"
                ],
                'it-IT': [
                    "Parla altre lingue?",
                    "Vengo da Parigi. √à una bella citt√†.",
                    "Cosa ha mangiato stamattina?",
                    "Com'√® andata la sua giornata?",
                    "Lavora qui da molto tempo?",
                    "Cosa le piacerebbe fare questo fine settimana?",
                    "Conosce questo ristorante?",
                    "Perch√© ha deciso di imparare questa lingua?"
                ],
                'pt-PT': [
                    "Fala outras l√≠nguas?",
                    "Venho de Paris. √â une cidade bonita.",
                    "O que comeu esta manh√£?",
                    "Como correu o seu dia?",
                    "Trabalha aqui h√° muito tempo?",
                    "O que gostaria de faire este fim de semana?",
                    "Conhece este restaurante?",
                    "Porque decidiu aprender esta l√≠ngua?"
                ],
                'ja-JP': [
                    "‰ªñ„ÅÆË®ÄË™û„ÇíË©±„Åõ„Åæ„Åô„ÅãÔºü",
                    "„Éë„É™„Åã„ÇâÊù•„Åæ„Åó„Åü„ÄÇÁæé„Åó„ÅÑË°ó„Åß„Åô„ÄÇ",
                    "‰ªäÊúù„ÅØ‰Ωï„ÇíÈ£ü„Åπ„Åæ„Åó„Åü„ÅãÔºü",
                    "‰ªäÊó•„ÅØ„Å©„Çì„Å™‰∏ÄÊó•„Åß„Åó„Åü„ÅãÔºü",
                    "„Åì„Åì„ÅßÈï∑„ÅèÂÉç„ÅÑ„Å¶„ÅÑ„Åæ„Åô„ÅãÔºü",
                    "‰ªäÈÄ±Êú´„ÅØ‰Ωï„Çí„Åó„Åü„ÅÑ„Åß„Åô„ÅãÔºü",
                    "„Åì„ÅÆ„É¨„Çπ„Éà„É©„É≥„ÇíÁü•„Å£„Å¶„ÅÑ„Åæ„Åô„ÅãÔºü",
                    "„Å™„Åú„Åì„ÅÆË®ÄË™û„ÇíÂ≠¶„Åº„ÅÜ„Å®ÊÄù„Å£„Åü„ÅÆ„Åß„Åô„ÅãÔºü"
                ]
            },
            B1: {
                fr: [
                    "Pouvez-vous me donner votre avis sur ce projet?",
                    "Comment envisagez-vous votre avenir professionnel?",
                    "Quels sont vos principaux d√©fis actuellement?",
                    "Pensez-vous que l'√©ducation devrait √™tre gratuite?",
                    "Comment g√©reriez-vous cette situation difficile?",
                    "Quelles sont les diff√©rences culturelles que vous avez observ√©es?",
                    "Que signifie pour vous r√©ussir dans la vie?",
                    "Comment pourrait-on r√©soudre ce probl√®me?"
                ],
                'el-GR': [
                    "ŒúœÄŒøœÅŒµŒØœÑŒµ ŒΩŒ± ŒºŒøœÖ Œ¥œéœÉŒµœÑŒµ œÑŒ∑ Œ≥ŒΩœéŒºŒ∑ œÉŒ±œÇ Œ≥ŒπŒ± Œ±œÖœÑœå œÑŒø Œ≠œÅŒ≥Œø;",
                    "Œ†œéœÇ œÜŒ±ŒΩœÑŒ¨Œ∂ŒµœÉœÑŒµ œÑŒø ŒµœÄŒ±Œ≥Œ≥ŒµŒªŒºŒ±œÑŒπŒ∫œå œÉŒ±œÇ ŒºŒ≠ŒªŒªŒøŒΩ;",
                    "Œ†ŒøŒπŒµœÇ ŒµŒØŒΩŒ±Œπ ŒøŒπ Œ∫œçœÅŒπŒµœÇ œÄœÅŒøŒ∫ŒªŒÆœÉŒµŒπœÇ œÉŒ±œÇ Œ±œÖœÑŒÆ œÑŒ∑ œÉœÑŒπŒ≥ŒºŒÆ;",
                    "ŒùŒøŒºŒØŒ∂ŒµœÑŒµ œåœÑŒπ Œ∑ ŒµŒ∫œÄŒ±ŒØŒ¥ŒµœÖœÉŒ∑ Œ∏Œ± Œ≠œÄœÅŒµœÄŒµ ŒΩŒ± ŒµŒØŒΩŒ±Œπ Œ¥œâœÅŒµŒ¨ŒΩ;",
                    "Œ†œéœÇ Œ∏Œ± œáŒµŒπœÅŒπŒ∂œåœÉŒ±œÉœÑŒ±ŒΩ Œ±œÖœÑŒÆŒΩ œÑŒ∑ Œ¥œçœÉŒ∫ŒøŒªŒ∑ Œ∫Œ±œÑŒ¨œÉœÑŒ±œÉŒ∑;",
                    "Œ†ŒøŒπŒµœÇ ŒµŒØŒΩŒ±Œπ ŒøŒπ œÄŒøŒªŒπœÑŒπœÉŒºŒπŒ∫Œ≠œÇ Œ¥ŒπŒ±œÜŒøœÅŒ≠œÇ œÄŒøœÖ œÄŒ±œÅŒ±œÑŒ∑œÅŒÆœÉŒ±œÑŒµ;",
                    "Œ§Œπ œÉŒ∑ŒºŒ±ŒØŒΩŒµŒπ Œ≥ŒπŒ± ŒµœÉŒ¨œÇ Œ∑ ŒµœÄŒπœÑœÖœáŒØŒ± œÉœÑŒ∑ Œ∂œâŒÆ;",
                    "Œ†œéœÇ Œ∏Œ± ŒºœÄŒøœÅŒøœçœÉŒµ Œ∫Œ±ŒΩŒµŒØœÇ ŒΩŒ± ŒªœçœÉŒµŒπ Œ±œÖœÑœå œÑŒø œÄœÅœåŒ≤ŒªŒ∑ŒºŒ±;"
                ],
                'es-ES': [
                    "¬øPuede darme su opini√≥n sobre este proyecto?",
                    "¬øC√≥mo imagina su futuro profesional?",
                    "¬øCu√°les son sus principales desaf√≠os actualmente?",
                    "¬øCree que la educaci√≥n deber√≠a ser gratuita?",
                    "¬øC√≥mo manejar√≠a esta situaci√≥n dif√≠cil?",
                    "¬øQu√© diferencias culturales ha observado?",
                    "¬øQu√© significa para usted tener √©xito en la vida?",
                    "¬øC√≥mo se podr√≠a resolver este problema?"
                ],
                'de-DE': [
                    "K√∂nnen Sie mir Ihre Meinung zu diesem Projekt sagen?",
                    "Wie stellen Sie sich Ihre berufliche Zukunft vor?",
                    "Was sind momentan Ihre gr√∂√üten Herausforderungen?",
                    "Finden Sie, dass Bildung kostenlos sein sollte?",
                    "Wie w√ºrden Sie mit dieser schwierigen Situation umgehen?",
                    "Welche kulturellen Unterschiede haben Sie bemerkt?",
                    "Was bedeutet Erfolg im Leben f√ºr Sie?",
                    "Wie k√∂nnte man dieses Problem l√∂sen?"
                ],
                'it-IT': [
                    "Pu√≤ darmi il suo parere su questo progetto?",
                    "Come vede il suo futuro professionale?",
                    "Quali sono le sue sfide principali al momento?",
                    "Pensa che l'istruzione dovrebbe essere gratuita?",
                    "Come gestirebbe questa situazione difficile?",
                    "Quali sono le differenze culturali che ha osservato?",
                    "Cosa significa per lei avere successo nella vita?",
                    "Come si potrebbe risolvere questo problema?"
                ],
                'pt-PT': [
                    "Pode dar-me a sua opini√£o sobre este projeto?",
                    "Como imagina o seu futuro profissional?",
                    "Quais s√£o os seus principais desafios atualmente?",
                    "Acha que a educa√ß√£o deveria ser gratuite?",
                    "Como lidaria com esta situa√ß√£o dif√≠cil?",
                    "Que diferen√ßas culturais observou?",
                    "O que significa para si ter sucesso na vida?",
                    "Como se poderia resolver este problema?"
                ],
                'ja-JP': [
                    "„Åì„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Å´„Å§„ÅÑ„Å¶ÊÑèË¶ã„ÇíËÅû„Åã„Åõ„Å¶„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÅãÔºü",
                    "„ÅÇ„Å™„Åü„ÅÆÂ∞ÜÊù•„ÅÆ‰ªï‰∫ã„Å´„Å§„ÅÑ„Å¶„Å©„ÅÜËÄÉ„Åà„Å¶„ÅÑ„Åæ„Åô„ÅãÔºü",
                    "ÁèæÂú®„ÅÆ‰∏ª„Å™Ë™≤È°å„ÅØ‰Ωï„Åß„Åô„ÅãÔºü",
                    "ÊïôËÇ≤„ÅØÁÑ°Êñô„Åß„ÅÇ„Çã„Åπ„Åç„Å†„Å®ÊÄù„ÅÑ„Åæ„Åô„ÅãÔºü",
                    "„Åì„ÅÆÂõ∞Èõ£„Å™Áä∂Ê≥Å„Å´„Å©„ÅÜÂØæÂá¶„Åó„Åæ„Åô„ÅãÔºü",
                    "„Å©„ÅÆ„Çà„ÅÜ„Å™ÊñáÂåñ„ÅÆÈÅï„ÅÑ„Å´Ê∞ó„Å•„Åç„Åæ„Åó„Åü„ÅãÔºü",
                    "„ÅÇ„Å™„Åü„Å´„Å®„Å£„Å¶‰∫∫Áîü„ÅÆÊàêÂäü„Å®„ÅØ‰Ωï„Åß„Åô„ÅãÔºü",
                    "„Åì„ÅÆÂïèÈ°å„ÇíËß£Ê±∫„Åô„Çã„Å´„ÅØ„Å©„ÅÜ„Åô„Çå„Å∞„Çà„ÅÑ„Åß„Åó„Çá„ÅÜ„ÅãÔºü"
                ]
            },
            B2: {
                fr: [
                    "Selon vous, quels sont les enjeux majeurs de notre √©poque?",
                    "Comment analysez-vous l'impact de la technologie sur la soci√©t√©?",
                    "Pourriez-vous me d√©velopper votre point de vue sur cette question?",
                    "Quelles implications cela aurait-il pour l'√©conomie globale?",
                    "Comment compareriez-vous les diff√©rentes approches de ce sujet?",
                    "Qu'est-ce qui justifierait un changement de politique √† ce sujet?",
                    "Pouvez-vous anticiper les cons√©quences √† long terme?",
                    "Comment pourrait-on am√©liorer cette situation de mani√®re significative?"
                ],
                'el-GR': [
                    "ŒöŒ±œÑŒ¨ œÑŒ∑ Œ≥ŒΩœéŒºŒ∑ œÉŒ±œÇ, œÄŒøŒπŒµœÇ ŒµŒØŒΩŒ±Œπ ŒøŒπ Œ∫œçœÅŒπŒµœÇ œÄœÅŒøŒ∫ŒªŒÆœÉŒµŒπœÇ œÑŒ∑œÇ ŒµœÄŒøœáŒÆœÇ ŒºŒ±œÇ;",
                    "Œ†œéœÇ Œ±ŒΩŒ±ŒªœçŒµœÑŒµ œÑŒ∑ŒΩ ŒµœÄŒØŒ¥œÅŒ±œÉŒ∑ œÑŒ∑œÇ œÑŒµœáŒΩŒøŒªŒøŒ≥ŒØŒ±œÇ œÉœÑŒ∑ŒΩ Œ∫ŒøŒπŒΩœâŒΩŒØŒ±;",
                    "ŒòŒ± ŒºœÄŒøœÅŒøœçœÉŒ±œÑŒµ ŒΩŒ± Œ±ŒΩŒ±œÄœÑœçŒæŒµœÑŒµ œÑŒ∑ Œ¨œÄŒøœàŒÆ œÉŒ±œÇ Œ≥ŒπŒ± Œ±œÖœÑœå œÑŒø Œ∂ŒÆœÑŒ∑ŒºŒ±;",
                    "Œ†ŒøŒπŒµœÇ Œ∏Œ± ŒÆœÑŒ±ŒΩ ŒøŒπ ŒµœÄŒπœÄœÑœéœÉŒµŒπœÇ Œ≥ŒπŒ± œÑŒ∑ŒΩ œÄŒ±Œ≥Œ∫œåœÉŒºŒπŒ± ŒøŒπŒ∫ŒøŒΩŒøŒºŒØŒ±;",
                    "Œ†œéœÇ Œ∏Œ± œÉœÖŒ≥Œ∫œÅŒØŒΩŒ±œÑŒµ œÑŒπœÇ Œ¥ŒπŒ±œÜŒøœÅŒµœÑŒπŒ∫Œ≠œÇ œÄœÅŒøœÉŒµŒ≥Œ≥ŒØœÉŒµŒπœÇ œÑŒøœÖ Œ∏Œ≠ŒºŒ±œÑŒøœÇ;",
                    "Œ§Œπ Œ∏Œ± Œ¥ŒπŒ∫Œ±ŒπŒøŒªŒøŒ≥ŒøœçœÉŒµ ŒºŒπŒ± Œ±ŒªŒªŒ±Œ≥ŒÆ œÄŒøŒªŒπœÑŒπŒ∫ŒÆœÇ œÉœÑŒø Œ∏Œ≠ŒºŒ± Œ±œÖœÑœå;",
                    "ŒúœÄŒøœÅŒµŒØœÑŒµ ŒΩŒ± œÄœÅŒøŒ≤ŒªŒ≠œàŒµœÑŒµ œÑŒπœÇ ŒºŒ±Œ∫œÅŒøœÄœÅœåŒ∏ŒµœÉŒºŒµœÇ œÉœÖŒΩŒ≠œÄŒµŒπŒµœÇ;",
                    "Œ†œéœÇ Œ∏Œ± ŒºœÄŒøœÅŒøœçœÉŒµ Œ∫Œ±ŒΩŒµŒØœÇ ŒΩŒ± Œ≤ŒµŒªœÑŒπœéœÉŒµŒπ œÉŒ∑ŒºŒ±ŒΩœÑŒπŒ∫Œ¨ Œ±œÖœÑŒÆŒΩ œÑŒ∑ŒΩ Œ∫Œ±œÑŒ¨œÉœÑŒ±œÉŒ∑;"
                ],
                'es-ES': [
                    "En su opini√≥n, ¬øcu√°les son los principales desaf√≠os de nuestra √©poca?",
                    "¬øC√≥mo analiza el impacto de la tecnolog√≠a en la sociedad?",
                    "¬øPodr√≠a explicarme su punto de vista sobre esta cuesti√≥n?",
                    "¬øQu√© implicaciones tendr√≠a esto para la econom√≠a global?",
                    "¬øC√≥mo comparar√≠a los diferentes enfoques sobre este tema?",
                    "¬øQu√© justificar√≠a un cambio de pol√≠tica al respecto?",
                    "¬øPuede anticipar las consecuencias a largo plazo?",
                    "¬øC√≥mo se pourrait am√©liorer ce probl√®me de mani√®re significative?"
                ],
                'de-DE': [
                    "Was sind Ihrer Meinung nach die gr√∂√üten Herausforderungen unserer Zeit?",
                    "Wie analysieren Sie den Einfluss der Technologie auf die Gesellschaft?",
                    "K√∂nnten Sie Ihren Standpunkt zu diesem Thema n√§her erl√§utern?",
                    "Welche Auswirkungen h√§tte dies auf die Weltwirtschaft?",
                    "Wie w√ºrden Sie die verschiedenen Ans√§tze zu diesem Thema vergleichen?",
                    "Was w√ºrde einen Politikwechsel in diesem Bereich rechtfertigen?",
                    "K√∂nnen Sie die langfristigen Folgen absehen?",
                    "Wie k√∂nnte man diese Situation signifikant verbessern?"
                ],
                'it-IT': [
                    "Secondo lei, quali sont le sfide principali della nostra epoca?",
                    "Come analizza l'impatto della tecnologia sulla societ√†?",
                    "Potrebbe approfondire il suo punto di vista su questa questione?",
                    "Quali implicazioni avrebbe per l'economia globale?",
                    "Come paragonerebbe i diversi approcci a questo argomento?",
                    "Cosa giustificherebbe un changement de politique in merito?",
                    "Pu√≤ anticipare le conseguenze a lungo termine?",
                    "Come si pourrait migliorare questa situazione in modo significativo?"
                ],
                'pt-PT': [
                    "Na sua opini√£o, quais s√£o os principais desafios da nossa √©poca?",
                    "Como analisa o impacto da tecnologia na sociedade?",
                    "Poderia desenvolver o seu ponto de vista sobre esta quest√£o?",
                    "Que implica√ß√µes teria isso para a economia global?",
                    "Como compararia as diferentes abordagens a este assunto?",
                    "O que justificaria uma mudan√ßa de pol√≠tica sobre este tema?",
                    "Pode antecipar as consequ√™ncias a longo prazo?",
                    "Como se poderia melhorar esta situa√ß√£o de forma significativa?"
                ],
                'ja-JP': [
                    "Áèæ‰ª£„ÅÆ‰∏ªË¶Å„Å™Ë™≤È°å„ÅØ‰Ωï„Å†„Å®ÊÄù„ÅÑ„Åæ„Åô„ÅãÔºü",
                    "„ÉÜ„ÇØ„Éé„É≠„Ç∏„Éº„ÅåÁ§æ‰ºö„Å´‰∏é„Åà„ÇãÂΩ±Èüø„Çí„Å©„ÅÜÂàÜÊûê„Åó„Åæ„Åô„ÅãÔºü",
                    "„Åì„ÅÆÂïèÈ°å„Å´„Å§„ÅÑ„Å¶„ÅÆ„ÅÇ„Å™„Åü„ÅÆË¶ãËß£„ÇíË©≥„Åó„ÅèÊïô„Åà„Å¶„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÅãÔºü",
                    "„Åì„Çå„Åå‰∏ñÁïåÁµåÊ∏à„Å´„Å©„ÅÆ„Çà„ÅÜ„Å™ÂΩ±Èüø„Çí‰∏é„Åà„Çã„Åß„Åó„Çá„ÅÜ„ÅãÔºü",
                    "„Åì„ÅÆ„ÉÜ„Éº„Éû„Å´ÂØæ„Åô„ÇãÁï∞„Å™„Çã„Ç¢„Éó„É≠„Éº„ÉÅ„Çí„Å©„ÅÆ„Çà„ÅÜ„Å´ÊØîËºÉ„Åó„Åæ„Åô„ÅãÔºü",
                    "„Åì„ÅÆ‰ª∂„Å´Èñ¢„Åó„Å¶ÊîøÁ≠ñÂ§âÊõ¥„ÇíÊ≠£ÂΩìÂåñ„Åô„Çã„ÇÇ„ÅÆ„ÅØ‰Ωï„Åß„Åô„ÅãÔºü",
                    "Èï∑ÊúüÁöÑ„Å™ÂΩ±Èüø„Çí‰∫àÊ∏¨„Åß„Åç„Åæ„Åô„ÅãÔºü",
                    "„Åì„ÅÆÁä∂Ê≥Å„ÇíÂ§ßÂπÖ„Å´ÊîπÂñÑ„Åô„Çã„Å´„ÅØ„Å©„ÅÜ„Åô„Çå„Å∞„Çà„ÅÑ„Åß„Åó„Çá„ÅÜ„ÅãÔºü"
                ]
            }
        };

        // √âtat global
        let state = {
            targetLang: 'el-GR',
            level: 'A1',
            currentFrench: '',
            currentTarget: '',
            transcript: '',
            mediaRecorder: null,
            audioChunks: [],
            correctCount: 0,
            totalCount: 0,
            showTranslation: true,
            isRecording: false
        };

        // √âl√©ments DOM
        const els = {
            targetLangSelect: document.getElementById('targetLang'),
            levelSelect: document.getElementById('level'),
            generateBtn: document.getElementById('generateBtn'),
            frenchDialogue: document.getElementById('frenchDialogue'),
            targetDialogue: document.getElementById('targetDialogue'),
            targetLangLabel: document.getElementById('targetLangLabel'),
            speakTarget: document.getElementById('speakTarget'),
            toggleTranslation: document.getElementById('toggleTranslation'),
            recordBtn: document.getElementById('recordBtn'),
            stopBtn: document.getElementById('stopBtn'),
            transcript: document.getElementById('transcript'),
            checkBtn: document.getElementById('checkBtn'),
            recorderStatus: document.getElementById('recorderStatus'),
            correctionBox: document.getElementById('correctionBox'),
            correctionContainer: document.getElementById('correctionContainer'),
            correctionDivider: document.getElementById('correctionDivider'),
            correctCount: document.getElementById('correctCount'),
            totalCount: document.getElementById('totalCount')
        };

        // Langue cible
        const langNames = {
            'el-GR': 'Grec',
            'es-ES': 'Espagnol',
            'de-DE': 'Allemand',
            'it-IT': 'Italien',
            'pt-PT': 'Portugais',
            'ja-JP': 'Japonais'
        };

        // Initialiser Web Speech API
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition || window.mozSpeechRecognition || window.msSpeechRecognition;
        if (!SpeechRecognition) {
            console.error("Speech Recognition non support√©");
        }

        const recognition = SpeechRecognition ? new SpeechRecognition() : null;
        if (recognition) {
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = state.targetLang;

            recognition.onstart = () => {
                console.log('üé§ Reconnaissance vocale d√©marr√©e (onstart)');
                state.isRecording = true;
                els.recordBtn.disabled = true;
                els.stopBtn.disabled = false;
                els.recorderStatus.textContent = 'üî¥ Enregistrement en cours...';
                els.recorderStatus.className = 'recorder-status status-recording';
                els.checkBtn.disabled = true;
            };

            recognition.onresult = (event) => {
                state.transcript = Array.from(event.results)
                    .map(result => result[0].transcript)
                    .join('');
                updateTranscript();
                console.log('R√©sultat:', state.transcript);
            };

            recognition.onerror = (event) => {
                console.error('Erreur reconnaissance:', event.error);
                let errorMsg = event.error;
                if (event.error === 'no-speech') {
                    errorMsg = 'Pas de son d√©tect√©. Parlez plus fort!';
                } else if (event.error === 'network') {
                    errorMsg = 'Erreur r√©seau. V√©rifiez votre connexion.';
                } else if (event.error === 'not-allowed') {
                    errorMsg = 'Acc√®s micro refus√©. V√©rifiez vos param√®tres.';
                } else if (event.error === 'service-not-allowed') {
                    errorMsg = 'Service non autoris√©. (Besoin de HTTPS sur mobile?)';
                }
                els.recorderStatus.textContent = `‚ö†Ô∏è ${errorMsg}`;
                els.recorderStatus.className = 'recorder-status status-error';
                state.isRecording = false;
                els.recordBtn.disabled = false;
                els.stopBtn.disabled = true;
            };

            recognition.onend = () => {
                state.isRecording = false;
                els.recordBtn.disabled = false;
                els.stopBtn.disabled = true;
                els.recorderStatus.textContent = 'Pr√™t √† enregistrer';
                els.recorderStatus.className = 'recorder-status status-ready';
                els.checkBtn.disabled = state.transcript === '';
            };
        }

        // √âv√©nements
        els.generateBtn.addEventListener('click', generateDialogue);
        els.speakTarget.addEventListener('click', () => {
            speakText(state.currentTarget, state.targetLang);
        });
        els.toggleTranslation.addEventListener('click', toggleTranslation);
        els.recordBtn.addEventListener('click', startRecording);
        els.stopBtn.addEventListener('click', stopRecording);
        els.checkBtn.addEventListener('click', checkAnswer);
        els.targetLangSelect.addEventListener('change', (e) => {
            state.targetLang = e.target.value;
            if (recognition) recognition.lang = state.targetLang;
            els.targetLangLabel.textContent = langNames[state.targetLang];
            generateDialogue();
        });
        els.levelSelect.addEventListener('change', (e) => {
            state.level = e.target.value;
            generateDialogue();
        });

        function generateDialogue() {
            const dialogues = DIALOGUES[state.level].fr;
            state.currentFrench = dialogues[Math.floor(Math.random() * dialogues.length)];
            state.totalCount++;
            els.totalCount.textContent = state.totalCount;

            els.frenchDialogue.textContent = state.currentFrench;
            generateTranslation();

            state.transcript = '';
            els.transcript.innerHTML = '<span class="transcript-empty">Aucun enregistrement</span>';
            els.correctionContainer.style.display = 'none';
            els.correctionDivider.style.display = 'none';
            els.checkBtn.disabled = true;
            els.recordBtn.disabled = false;

            setTimeout(() => {
                speakText(state.currentTarget, state.targetLang);
            }, 1000);
        }

        function generateTranslation() {
            const dialogues = DIALOGUES[state.level];
            const frIndex = dialogues.fr.indexOf(state.currentFrench);
            if (frIndex !== -1 && dialogues[state.targetLang]) {
                state.currentTarget = dialogues[state.targetLang][frIndex];
            } else {
                state.currentTarget = '(Traduction non disponible)';
            }
            els.targetDialogue.textContent = state.showTranslation ? state.currentTarget : '???';
        }

        function startRecording() {
            console.log('Tentative de d√©marrage de l\'enregistrement...');
            if (!recognition) {
                alert("La reconnaissance vocale n'est pas support√©e par ce navigateur ou n√©cessite HTTPS.");
                return;
            }

            if (state.isRecording) return;

            state.transcript = '';
            updateTranscript();
            recognition.lang = state.targetLang;
            try {
                recognition.start();
            } catch (err) {
                console.error("Erreur start recording:", err);
                state.isRecording = false;
                els.recordBtn.disabled = false;
            }
        }

        function stopRecording() {
            if (recognition) recognition.stop();
        }

        function updateTranscript() {
            if (state.transcript) {
                els.transcript.textContent = state.transcript;
            } else {
                els.transcript.innerHTML = '<span class="transcript-empty">Aucun enregistrement</span>';
            }
        }

        function speakText(text, lang) {
            if (!text || text === '???' || text.includes('Traduction non disponible')) return;

            function speak() {
                window.speechSynthesis.cancel();

                setTimeout(() => {
                    const utterance = new SpeechSynthesisUtterance(text);
                    const voices = window.speechSynthesis.getVoices();
                    const targetLangPrefix = lang.split('-')[0].toLowerCase();
                    let voice = voices.find(v => v.lang === lang) ||
                        voices.find(v => v.lang.toLowerCase().startsWith(targetLangPrefix));

                    if (voice) {
                        utterance.voice = voice;
                        console.log('Voix s√©lectionn√©e:', voice.name, '(', voice.lang, ')');
                    }

                    if (window.speechSynthesis.paused) {
                        window.speechSynthesis.resume();
                    }

                    utterance.lang = lang;
                    utterance.rate = 0.85;
                    utterance.pitch = 1.0;
                    utterance.volume = 1.0;

                    utterance.onstart = () => {
                        console.log('Lecture commenc√©e pour:', text);
                        els.speakTarget.style.background = 'var(--color-teal-300)';
                        els.speakTarget.textContent = 'üîä Lecture en cours...';
                    };

                    utterance.onend = () => {
                        console.log('Lecture termin√©e.');
                        els.speakTarget.style.background = '';
                        els.speakTarget.textContent = `üîä √âcouter le ${langNames[state.targetLang] || 'Langue'}`;
                    };

                    utterance.onerror = (e) => {
                        console.error('Erreur synth√®se vocale:', e);
                        els.speakTarget.style.background = '';
                        els.speakTarget.textContent = '‚ö†Ô∏è Erreur Audio';
                    };

                    window.speechSynthesis.speak(utterance);
                }, 100);
            }

            if (window.speechSynthesis.getVoices().length > 0) {
                speak();
            } else {
                window.speechSynthesis.onvoiceschanged = () => {
                    speak();
                    window.speechSynthesis.onvoiceschanged = null;
                };
                setTimeout(() => { if (window.speechSynthesis.getVoices().length === 0) speak(); }, 500);
            }
        }

        function toggleTranslation() {
            state.showTranslation = !state.showTranslation;
            els.targetDialogue.textContent = state.showTranslation ? state.currentTarget : '???';
            els.toggleTranslation.textContent = state.showTranslation ? 'üëÅÔ∏è Masquer' : 'üëÅÔ∏è Voir';
        }

        function checkAnswer() {
            if (!state.transcript) return;
            els.correctionDivider.style.display = 'block';
            els.correctionContainer.style.display = 'block';

            const similarity = calculateSimilarity(state.transcript.toLowerCase(), state.currentTarget.toLowerCase());

            if (similarity > 0.6) {
                els.correctionBox.className = 'correction-box success correction-content';
                els.correctionBox.innerHTML = `<strong>‚úÖ Excellent!</strong> Votre prononciation est tr√®s proche de la cible.`;
                state.correctCount++;
                els.correctCount.textContent = state.correctCount;
            } else {
                els.correctionBox.className = 'correction-box error correction-content';
                els.correctionBox.innerHTML = `<strong>Cible:</strong> ${state.currentTarget}<br><strong>Votre r√©ponse:</strong> ${state.transcript}`;
            }
        }

        function calculateSimilarity(str1, str2) {
            const longer = str1.length > str2.length ? str1 : str2;
            const shorter = str1.length > str2.length ? str2 : str1;
            if (longer.length === 0) return 1.0;
            const editDistance = getEditDistance(longer, shorter);
            return (longer.length - editDistance) / longer.length;
        }

        function getEditDistance(s1, s2) {
            const costs = [];
            for (let i = 0; i <= s1.length; i++) {
                let lastValue = i;
                for (let j = 0; j <= s2.length; j++) {
                    if (i === 0) {
                        costs[j] = j;
                    } else if (j > 0) {
                        let newValue = costs[j - 1];
                        if (s1.charAt(i - 1) !== s2.charAt(j - 1)) {
                            newValue = Math.min(Math.min(newValue, lastValue), costs[j]) + 1;
                        }
                        costs[j - 1] = lastValue;
                        lastValue = newValue;
                    }
                }
                if (i > 0) costs[s2.length] = lastValue;
            }
            return costs[s2.length];
        }

        // Initialiser
        els.targetLangLabel.textContent = langNames[state.targetLang];
    </script>
</body>

</html>